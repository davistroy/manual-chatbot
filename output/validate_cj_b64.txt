import sys
import traceback
import statistics
from collections import Counter

sys.path.insert(0, "C:/Users/Troy Davis/dev/personal/manual-chatbot/src")

def main():
    SEP = "=" * 70
    NL = chr(10)

    print(SEP)
    print("STAGE 0: PROFILE LOADING")
    print(SEP)

    from pipeline.profile import load_profile, validate_profile, compile_patterns
    profile = load_profile("C:/Users/Troy Davis/dev/personal/manual-chatbot/tests/fixtures/cj_universal_profile.yaml")
    validation_errors = validate_profile(profile)
    print(f"Profile: {profile.manual_id}")
    print(f"Manual title: {profile.manual_title}")
    print(f"Vehicles: {[v.model for v in profile.vehicles]}")
    for h in profile.hierarchy:
        print(f"  Level {h.level} ({h.name}): id_pattern={h.id_pattern!r}, known_ids={len(h.known_ids)}")
    print(f"Validation errors: {validation_errors}")
    compiled = compile_patterns(profile)
    print(f"Compiled: {list(compiled.keys())}")
    print()
    print("STAGE 0 DONE")

if __name__ == "__main__":
    try:
        main()
    except Exception as e:
        print(f"FATAL: {e}")
        traceback.print_exc()
